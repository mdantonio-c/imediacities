<div
	ng-if="datactrl.loading"
	ng-include="main.templateDir + 'loader.html'">
</div>
<div ng-controller='SearchController as ctrl'>
	<div class="row">
		<div id="imaginary_container">
			<div id="search-logo" ng-show="ctrl.viewlogo">
				<img class="imc-logo" ng-src="static/assets/images/IMC-Logo-big-transp.png">
			</div>
			<div class="input-group stylish-input-group">
				<input ng-attr-type="text" ng-model="ctrl.inputTerm" class="form-control" ng-attr-placeholder="Search video"
				ng-keypress="($event.charCode === 13)?ctrl.searchVideos():return" autofocus>
				<span class="input-group-addon">
					<button ng-click="ctrl.searchVideos()">
					<span class="glyphicon glyphicon-search"></span>
					</button>
				</span>
			</div>
			<span ng-if="ctrl.loadResults && ctrl.videos.length == 0">No video found</span>
		</div>
	</div>
	<div class='row'>
	<!-- <div class="container" ng-show="ctrl.showmese" ng-style="{'float': 'left', 'width': '100%'}"><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span> Searching...</div> -->
	<div class="progress" ng-show="ctrl.showmese"><div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" ng-style="{'width':'100%'}">Searching</div></div>
		<div class="list-results" ng-if="ctrl.loadResults">
			<div class="list-results" ng-if="ctrl.videos.length > 0">
				<ul>
					<!-- <li ng-repeat="v in filteredVideos = (ctrl.videos | searchFor:searchString:this)"> -->
					<!-- <li ng-repeat="v in filteredVideos = (ctrl.videos | searchFor:searchString:this | limitTo: (vmin - vmax))"> -->
					<li ng-repeat="v in ctrl.videos">
						<a href ui-sref="logged.search.watch({v: v.id, meta: v})"><img ng-src="{{v.links['thumbnail']}}" /></a>
						<div class="primary-description">
							<a href ui-sref="logged.search.watch({v: v.id, meta: v})"><span class="title">{{v.attributes.identifying_title}}</span></a><i>({{v.relationships.item[0].attributes.duration | parseNum}})</i>
							<p><span ng-repeat="description in v.relationships.descriptions">
							<br>{{description.attributes.text}}{{$last ? '' : ', '}}</br></span></p>
							<p><span ng-repeat="keyword in v.relationships.keywords">
							{{keyword.attributes.term}}{{$last ? '' : ', '}}</span></p>
						</div>
						<div class="secondary-description" ng-show="v.id === ctrl.selectedVideoId">
							<p><b>Production Year(s)</b>: {{v.attributes.production_years[0]}}</p>
							<p><b>Location</b>: {{locname}}</p>
						</div>
					</li>

				<hr/>

				<form class="form-inline">
  					<div class="form-group">
    					<ul uib-pagination total-items="ctrl.bigTotalItems" ng-model="ctrl.currentPage" items-per-page="ctrl.ItemsByPage" ng-change="pageChanged()" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;" boundary-links="true"></ul>
  					</div>
  				<div class="form-group">
    				<!-- <select class="form-control" required="required" ng-model="ctrl.ItemsByPage">
						<option label="4 per page" value="4" selected="selected">4 per page</option>
						<option label="8 per page" value="8">8 per page</option>
						<option label="15 per page" value="15">15 per page</option>
						<option label="20 per page" value="20">20 per page</option>
					</select> -->
					<select class="form-control" ng-model='ctrl.ItemsByPage' required ng-options='option.value as option.name for option in ctrl.typeOptions'></select>
  				</div>
				</form>

				</ul>
			</div>
		</div>
	</div>
</div>
