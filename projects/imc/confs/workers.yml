# Customize this file to include compose configurations common to bluprints
version: '3'

services:

  backend:
    environment:
      ACTIVATE: 0

  proxy:
    environment:
      ACTIVATE: 0

  neo4j:
    environment:
      ACTIVATE: 0

  frontend:
    environment:
      ACTIVATE: 0

  ftp:
    environment:
      ACTIVATE: 0

  celery:
    environment:
      DEBUG_LEVEL: INFO
      APP_MODE: production
    depends_on:
      - rabbit
      - mongodb
    networks:
      worker_net:

  celeryui:
    environment:
      DEBUG_LEVEL: INFO
      APP_MODE: production
    command: flower --basic_auth=${CELERYUI_USER}:${CELERYUI_PASSWORD} --port=${CELERYUI_PORT} --persistent --db=/var/flower/flower -A restapi.flask_ext.flask_celery.worker.celery_app -n flower_monitor
    depends_on:
      - rabbit
      - mongodb
    networks:
      worker_net:

  rabbit:
    ports:
      - 5672:5672

  mongodb:
    ports:
      - 27017:27017

  mongoui:
    ports:
      - 8081:8081