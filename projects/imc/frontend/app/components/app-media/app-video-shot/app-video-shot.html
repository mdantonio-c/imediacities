<!-- Template per il singolo shot, da mettere in loop per la creazione di tutti gli shot o segmenti -->
<div class="row no-gutters box-single-shot" *ngIf="shot" [ngClass]="{'active': is_attivo}">

    <span class="col-1 container-checkbox" *ngIf="multiSelection">
        <!-- Checkbox per la selezione multipla -->
       <div class="box-checkbox">
           <input class="imc--input-checkbox styled-checkbox"
                  [id]="checkbox_selection_label" type="checkbox"
                  [value]="shot.attributes.shot_num"
                  (click)="shot_seleziona($event)"
           >
           <label [for]="checkbox_selection_label"></label>
       </div>
    </span>
    <span class="col-1 imc--flex--vertical-center box-single-shot--number">
        <!-- Numero dello shot, da scambiare con l'icona dell'active -->
        <span class="shot-number"><strong [innerHTML]="shot.attributes.shot_num +1" ></strong></span>
        <!-- Icona freccia azzurra per l'active sullo shot -->
        <i class="material-icons font-media-color" *ngIf="is_attivo">play_arrow</i>

    </span>

    <span class="col-3 imc--flex--vertical-center">
        <!-- Anteprima dello shot del video -->
        <span class="anteprima-shot click-event" (click)="shot_play()">
            <img [src]="shot.links.thumbnail" alt="">
            <span [innerHTML]="shot.attributes.duration | number:'2.2'"></span>
        </span>
    </span>

    <span [ngClass]="!multiSelection ? 'col-7' : 'col-6'" class="imc--flex--vertical-center row no-gutters anteprima-shot--info">
        <strong [innerHTML]="shot.attributes.timestamp"></strong>
        <span>
            frame range:
            <span class="paragraph-not-divide">
                <strong class="click-event" [innerHTML]="shot.attributes.start_frame_idx" (click)="shot_goto(shot.attributes.start_frame_idx)"></strong>
                -
                <strong class="click-event" [innerHTML]="shot.attributes.end_frame_idx" (click)="shot_goto(shot.attributes.end_frame_idx)"></strong>
            </span>
        </span>
        <ul class="box--icon-list">
            <li><i class="material-icons">place</i><span><strong [innerHTML]="shot.annotations.locations.length"></strong></span></li>
            <li><i class="material-icons">turned_in</i><span><strong [innerHTML]="shot.annotations.tags.length"></strong></span></li>
            <li><i class="material-icons">speaker_notes</i><span><strong [innerHTML]="shot.annotations.notes.length"></strong></span></li>
            <li><i class="material-icons">library_books</i><span><strong [innerHTML]="shot.annotations.references.length"></strong></span></li>
            <li class="icon-rotate"><i class="material-icons">link</i><span><strong [innerHTML]="shot.annotations.links.length"></strong></span></li>
        </ul>

    </span>

    <span class="col-1 imc--flex--vertical-center imc--flex--horizontal-center">
        <i class="material-icons click-event" (click)="details_toggle()" data-toggle="collapse" [attr.data-target]="'#'+collapse_id"
           aria-expanded="false"
           [attr.aria-controls]="'#'+collapse_id">
            <ng-container *ngIf="!details_show; else dropArrow">keyboard_arrow_down</ng-container>
           <ng-template #dropArrow>keyboard_arrow_up</ng-template></i>
    </span>
<!--</div>-->

<!-- Dettagli del singolo shot -->
<div class="collapse col-12"  [id]="collapse_id" [ngbCollapse]="!is_attivo">
    <div class="content">
        <div>
            <ng-template
                    ngFor
                    let-tag
                    [ngForOf]="shot.annotations.tags">
                <app-media-annotation [annotation]="tag"
                                      [can_delete]="tag"></app-media-annotation>
            </ng-template>
        </div>
        <div>
            <ng-template
                    ngFor
                    let-location
                    [ngForOf]="shot.annotations.locations">
                <app-media-annotation [annotation]="location"
                                      [can_delete]="tag_is_deletable(location)"></app-media-annotation>
            </ng-template>
        </div>
        <div class="row no-gutters space-paragraph-20">
        <!-- modali -->
        <div ngbDropdown ngbDropdownReposition class="imc--input--dropdown col-12 col-lg-7">
            <button [id]="dropdown_id" ngbDropdownToggle>Add Annotation</button>
            <div ngbDropdownMenu [attr.aria-labelledby]="dropdown_id" class="imc--input--dropdown">
                <span (click)="modale_show($event, 'insert-tag')" class="dropdown-item">Add Tag</span>
                <span (click)="modale_show($event, 'insert-geotag')" class="dropdown-item">Add Geotag</span>
                <span (click)="modale_show($event, 'insert-note')" class="dropdown-item">Add Note</span>
                <span (click)="modale_show($event, 'insert-reference')" class="dropdown-item">Add Reference</span>
                <span (click)="modale_show($event, 'insert-link')" class="dropdown-item">Add Link</span>
            </div>
        </div>

        <div class="col-7 col-lg-5 box-annotation-buttons">
            <!-- bottone vedi tutte le annotazioni -->
            <button class="btn btn-accent" (click)="modale_show($event, 'all-annotations')">See All</button>
            <!-- aggiungi a una lista -->
            <button class="btn btn-icon-border-classic"><i class="material-icons">playlist_add</i></button></div>
        </div>
    </div>
</div>

</div>