definitions:
  Annotation:
    required:
      - motivation
      - target
      - body
    properties:
      motivation:
        type: string
        enum:
          - tagging
          - commenting
          - describing
          - identifying
          - classifying
          - replying
          - segmentation
      body:
        $ref: "#/definitions/Body"
      target:
        type: string
        pattern: "(item|shot|anno):[a-z0-9-]+"
      selector:
        $ref: "#/definitions/Selector"
      private:
        type: boolean
        default: false
      embargo:
        type: string
        format: date

  List:
    required:
      - name
      - description
    properties:
      name:
        type: string
      description:
        type: string

  Body:
    discriminator: type
    required:
      - type
    properties:
      type:
        type: string
        enum:
          - ResourceBody
          - TextualBody
          - TVSBody

  ResourceBody:
    allOf:
      - $ref: "#/definitions/Body"
      - required:
          - source
        properties:
          source:
            $ref: "#/definitions/Source"
          spatial:
            $ref: "#/definitions/Spatial"
  TextualBody:
    allOf:
      - $ref: "#/definitions/Body"
      - required:
          - value
        properties:
          value:
            type: string
          language:
            type: string
            default: "en"
  TVSBody:
    allOf:
      - $ref: "#/definitions/Body"
      - required:
          - segments
        properties:
          segments:
            type: array
            uniqueItems: true
            minItems: 1
            items:
              type: string
              pattern: "t=[0-9],[0-9]"
  Selector:
    required:
      - type
      - value
    properties:
      type:
        type: string
        enum:
          - FragmentSelector
          - AreaSelector
      value:
        type: string

  Source:
    required:
      - iri
      - name
    properties:
      iri:
        type: string
      name:
        type: string
      alternativesNames:
        $ref: "#/definitions/AlternativeNames"

  AlternativeNames:
    additionalProperties:
      type: string

  Spatial:
    required:
      - lat
      - long
    properties:
      lat:
        type: number
        format: double
      long:
        type: number
        format: double

  VideoInRevision:
    description: Video under revision
    required:
      - "since"
      - "video"
      - "progress"
      - "state"
      - "assignee"
    properties:
      since:
        description: Date of start of a revision.
        type: string
        format: date
      video:
        description: Video under revision
        required:
          - uuid
          - title
        properties:
          uuid:
            type: string
          title:
            type: string
      progress:
        description: Progress of the revision in percentange
        type: integer
        format: int32
        minimum: 0
        maximum: 100
      state:
        description: Revision status
        type: string
        enum:
          - "R"
          - "W"
      assignee:
        description: assignee of the revision
        required:
          - uuid
          - name
        properties:
          uuid:
            type: string
          name:
            type: string
