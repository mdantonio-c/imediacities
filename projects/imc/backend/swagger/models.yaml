definitions:
  Annotation:
    required:
      - target
      - body
    properties:
      body:
        $ref: "#/definitions/Body"
      target:
        type: string
        pattern: '(item|shot|anno):[a-z0-9-]+'
      selector:
        $ref: '#/definitions/Selector'

  Annotations:
    type: array
    items:
      $ref: "#/definitions/Annotation"

  Body:
    discriminator: type
    required:
      - type
    properties:
      type:
        type: string
        enum:
          - ResourceBody
          - TextualBody
      purpose:
        type: string
        enum:
          - tagging
          - commenting
          - describing
          - identifying
          - classifying
          - replying
  ResourceBody:
    allOf:
      - $ref: "#/definitions/Body"
      - required:
          - source
        properties:
          source:
            $ref: "#/definitions/Source"
          spatial:
            $ref: "#/definitions/Spatial"
  TextualBody:
    allOf:
      - $ref: "#/definitions/Body"
      - required:
          - value
        properties:
          value:
            type: string
          language:
            type: string
            default: 'en'
  Selector:
    required:
      - type
      - value
    properties:
      type:
        type: string
        enum:
          - FragmentSelector
          - AreaSelector
      value:
        type: string

  Source:
    required:
      - iri
      - name
    properties:
      iri:
        type: string
      name:
        type: string
      alternativesNames:
        $ref: "#/definitions/AlternativeNames" 

  AlternativeNames:
    additionalProperties:
        type: string

  Spatial:
    required:
      - lat
      - long
    properties:
      lat:
        type: number
        format: double
      long:
        type: number
        format: double

  SearchCriteria:
    properties:
      match:
        $ref: "#/definitions/SearchMatch"
      filter:
        $ref: "#/definitions/SearchFilter"
          
  SearchMatch:
    required:
      - term
      - fields
    properties:
      term:        
        type: string
      fields:
        type: array
        items:
          type: string
          enum:               
            - title               
            - contributor               
            - keyword
            - description
        minItems: 1

  SearchFilter:
    properties:
      type:
        type: string
        enum:               
          - all               
          - video               
          - image         
      provider:             
          type: string
      country:
          type: string
          description: production country, codelist iso3166-1
      yearfrom:
          description: production year range, start year of the range
          type: integer
          minimum: 1900
      yearto:
          description: production year range, end year of the range, maximum=current year, yearto>=yearfrom
          type: integer
          minimum: 1900
      iprstatus:
          description: IPR status
          type: string
          enum:
            - 01
            - 02
            - 03
            - 04
            - 05
            - 06
            - 07
            - 08
            - 09
            - 10
