image: docker:latest

before_script:
  - docker info
  - docker -v
  - apk add --no-cache python3 git
  - python3 --version
  - wget --no-check-certificate https://bootstrap.pypa.io/get-pip.py && python3 get-pip.py && rm *.py
  - pip3 --version
  - pip3 install --upgrade git+https://github.com/rapydo/do.git@0.6.0
  - rapydo --version
  - docker-compose -v


job:
  script:
    - mkdir data
    # - Not needed, just added for test:
    - ls projects/imc/frontend
    - rapydo --project imc --mode production init
    - rapydo --project imc --mode production start
    - rapydo --project imc --mode production remove
    - ls data/

    # - rapydo --project imc --mode production test
    
  # only:
  #   - NO_ONE